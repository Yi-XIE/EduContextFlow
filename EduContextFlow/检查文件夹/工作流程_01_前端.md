# 🌐 前端工作流程 (Frontend)

**文件**：`web/index.html`, `web/app.js`, `web/styles.css`

## 1. 用户交互启动
1. **输入阶段**：用户在聊天框输入文字或点击 UI 选项。
2. **触发阶段**：点击“发送”按钮，触发 `app.js` 中的 `sendMessage()` 函数。

## 2. 状态反馈 (UX)
1. **加载动画**：左侧消息区域出现“正在思考 ● ● ●”的动画。
2. **计时器**：动画旁启动实时计时器（显示已等待秒数），直到收到回复。

## 3. API 请求
1. **构造数据**：使用 `FormData` 封装 `message` 和可选的 `files`。
2. **发送请求**：使用 `fetch` 发送 POST 请求到 `http://localhost:3000/api/chat`。

## 4. 响应处理
1. **隐藏动画**：停止计时器并隐藏加载动画。
2. **消息展示**：将回复内容解析并添加到对话框。
3. **文件预览**：
   - 如果返回 `output_files`，自动生成预览链接（Markdown 或 图片）。
   - 图片通过 `/outputs/<filename>` 接口加载。
4. **选项渲染**：如果 Dispatcher 返回了 `options`，前端会渲染成可点击的按钮。

